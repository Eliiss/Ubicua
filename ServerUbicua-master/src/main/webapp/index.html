<!DOCTYPE html>
<html>
<head>
    <meta charset="ISO-8859-1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>  
    <title>Server example</title>
    <style>
        table { font-family: arial, sans-serif; border-collapse: collapse; width: 100%; }
        td, th { border: 1px solid #dddddd; text-align: left; padding: 8px; }
        tr:nth-child(even) { background-color: #dddddd; }
    </style>
</head>
<body>
    <script>
        $(document).ready(function () { loadData(); });

        function loadData()
        {
            $.ajax({
                data: {},
                url: "GetData",
                type: 'post',
                async: false,
                success: function (response)
                {
                    var resp = JSON.parse(response);
                    $("#dataTable").empty();
                    var newRow = "";
                    $.each(resp, function (i, value)
                    {
                        newRow += "<tr>";
                        newRow += "<td>" + value.timestamp + "</td>";
                        newRow += "<td>" + value.temperature + " °C</td>";
                        newRow += "<td>" + value.humidity + " %</td>";
                        newRow += "<td>" + value.light + "</td>";
                        newRow += "</tr>";
                    });
                    $("#dataTable").append(newRow);
                }
            });
        }

        function insertData()
        {
            var temperature = $('#newTemperature').val();
            var humidity = $('#newHumidity').val();
            var light = $('#newLight').val();
            $.ajax({
                data: {
                    temperature: temperature,
                    humidity: humidity,
                    light: light
                },
                url: "SetData",
                type: 'post',
                async: false,
                success: function (response) { loadData(); }
            });
        }
    </script>
    <h1>SERVER EXAMPLE</h1>
    <br>
    <label>Temperature</label>
    <input type="number" id="newTemperature" step="0.1"><br>
    <label>Humidity</label>
    <input type="number" id="newHumidity" step="0.1"><br>
    <label>Light</label>
    <input type="number" id="newLight"><br>
    <button onclick="insertData()">Send</button> 
    <br><br>
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Date/Time</th>
                <th scope="col">Temperature (°C)</th>
                <th scope="col">Humidity (%)</th>
                <th scope="col">Light</th>
            </tr>
        </thead>
        <tbody id="dataTable"></tbody>
    </table>		
</body>
</html>